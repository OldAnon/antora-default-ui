name: Release bundle

on: 
  workflow_dispatch:
    inputs:
      release_version:
        description: 'Version number of the release'
        required: true
jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '14'

    - name: Install Dependencies
      run: npm install

    - name: Bundle
      run: npx gulp bundle

    - name: Upload Artifact
      uses: actions/upload-artifact@v4
      with:
        name: ui-bundle
        path: build/ui-bundle.zip

    - name: Release Artifact
      uses: softprops/action-gh-release@v1
      id: boob
      with: 
        body: "Another release..."
        tag_name: v${{  github.event.inputs.release_version  }}
        draft: false
        prerelease: false
        files: build/sds-antora-ui-bundle/sds-antora-ui-bundle-${{ github.event.inputs.release_version }}.zip
      env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN  }}